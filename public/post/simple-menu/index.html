<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
<meta charset="utf-8">


<meta http-equiv="X-UA-Compatible" content="IE=edge">


<title>A Simple Menu</title>
<meta name="author" content="">
<meta name="description" content="">


<meta name="google-site-verification" content="">


<meta name="Copyright" content="">


<meta name="viewport" content="width=device-width, initial-scale=1">


<link rel="shortcut icon" href="http://blank.mdhender.com/favicon.ico">


<link rel="stylesheet" href="http://blank.mdhender.com/css/reset.css">
<clink rel="stylesheet" href="http://blank.mdhender.com/css/suede.css">
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Dosis" />
<link rel="stylesheet" type="text/css" href="http://blank.mdhender.com/css/origo.css" title="Origo" media="all" />


<script src="http://blank.mdhender.com/js/libs/prefixfree.min.js"></script>


<script src="http://blank.mdhender.com/js/libs/modernizr-2.8.3.dev.js"></script>



<meta name="application-name" content="" /> 
<meta name="msapplication-TileColor" content="" /> 
<meta name="msapplication-TileImage" content="" />
<meta name="msapplication-square150x150logo" content="" />
<meta name="msapplication-square310x310logo" content="" />
<meta name="msapplication-square70x70logo" content="" />
<meta name="msapplication-wide310x150logo" content="" />

<meta name="twitter:card" content="">
<meta name="twitter:site" content="">
<meta name="twitter:title" content="">
<meta name="twitter:description" content="">
<meta name="twitter:url" content="">

<meta property="og:title" content="" />
<meta property="og:description" content="" />
<meta property="og:url" content="" />
<meta property="og:image" content="" />
</head>
<body class="light blue smaller freestyle01">

<div id="layout">

	<div class="row smaller">
		<div class="col c5 smaller">
			<h1><a href="http://blank.mdhender.com/index.html">BLANK</a></h1>
		</div>

		<div class="col c7 aligncenter">
			<p class="slogan">starting from scratch...</p>
		</div>
	</div>



	<div class="row">
		<div class="col c2 alignleft">
			<nav>
				<ul class="menu">
					<li><a class="current" href="/" title="">Home</a></li>
					<li><a href="http://blank.mdhender.com/">Templates</a>
						<ul class="subpages">
							<li><a href="http://blank.mdhender.com/archetype">Archetypes</a></li>
							<li><a href="http://blank.mdhender.com/group">Groups</a></li>
							<li><a href="http://blank.mdhender.com/homepage">Home Page</a></li>
							<li><a href="http://blank.mdhender.com/list">Lists</a></li>
							<li><a href="http://blank.mdhender.com/partial">Partials</a></li>
							<li><a href="http://blank.mdhender.com/single">Singles</a></li>
							<li><a href="http://blank.mdhender.com/static">Static</a></li>
							<li><a href="http://blank.mdhender.com/syntax">Syntax</a></li>
						</ul>
					</li>
					<li><a href="http://blank.mdhender.com/best">Best Practices</a>
					<li><a href="http://blank.mdhender.com/misc">Miscellaneous</a>
					<li><a href="http://blank.mdhender.com/privacy">Privacy</a></li>
					<li><a href="http://blank.mdhender.com/about">About</a></li>
				</ul>
			</nav>
		</div>
 
		<div class="col c8">
			<article>
				<h1>A Simple Menu</h1>
				

<p><a href="http://gohugo.io/">Hugo</a> comes with the ability to control how <a href="http://gohugo.io/extras/menus/">menus</a>
get generated. This article will focus on just a few features - the mininum needed to make a set of
static menus look like they are dynamic.</p>

<p>I think that it is easiest to create a static version of what I am after and then
make changes to turn it into a template. That works really well with the <a href="http://gohugo.io/extras/livereload/">live reload</a>
feature.</p>

<p>As always, you can find all of this at my <a href="https://github.com/quoha/blank">repo</a>.</p>

<h2 id="toc_0">A Hard-Coded List</h2>

<p>The site&rsquo;s menu is simply going to list most of the categories and provide a link to the list page
for the category. My theme has support for showing the &ldquo;current&rdquo; menu item by highlighting it, so
I would like to use that.</p>

<p>Here&rsquo;s what the generated HTML should look like.</p>

<pre><code>&lt;nav&gt;
	&lt;ul class=&quot;menu&quot;&gt;
		&lt;li&gt;&lt;a class=&quot;current&quot; href=&quot;{{ .Site.BaseUrl }}/&quot; title=&quot;&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/&quot;&gt;Templates&lt;/a&gt;
			&lt;ul class=&quot;subpages&quot;&gt;
				&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/archetype&quot;&gt;Archetypes&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/group&quot;&gt;Groups&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/homepage&quot;&gt;Home Page&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/list&quot;&gt;Lists&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/menu&quot;&gt;Menus&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/partial&quot;&gt;Partials&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/single&quot;&gt;Singles&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/static&quot;&gt;Static&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/syntax&quot;&gt;Syntax&lt;/a&gt;&lt;/li&gt;
			&lt;/ul&gt;
		&lt;/li&gt;
		&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/best&quot;&gt;Best Practices&lt;/a&gt;
		&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/misc&quot;&gt;Miscellaneous&lt;/a&gt;
		&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/privacy&quot;&gt;Privacy&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/about&quot;&gt;About&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
&lt;/nav&gt;
</code></pre>

<p>Note that I added the &ldquo;current&rdquo; class. To give it that dynamic feel, I want the menu item
highlighting to change to reflect the currently displayed content. That is not as hard as
it might seem.</p>

<p>I am using <code>.Site.BaseUrl</code> on the off-chance that I move this site to a sub-directory on
my web site. I doubt that will ever happen, but it is a good idea, especially if you are
working on a theme since you can&rsquo;t predict what users will do with it.</p>

<h2 id="toc_1">Setting up the Front Matter</h2>

<p>Hugo expects to find menu definitions in the front matter, so that is where I will start.</p>

<p>I want my menu to sort of mirror the tag and category structure, so I set my &ldquo;menu&rdquo; to the
name of the menu that I want to associate the content with. For example, this article is
about menus, so I add the following to my front matter:</p>

<pre><code>menu = &quot;menus&quot;
</code></pre>

<p>For my &ldquo;about&rdquo; page, I set the value to &ldquo;about.&rdquo; For an article about the home page, I would
set it to &ldquo;homepage.&rdquo; That aligns very nicely with the paths in my menu structure.</p>

<h2 id="toc_2">Create a Partial</h2>

<p>I like to create partial templates for most of my work, and this is no different.</p>

<pre><code>{{ &quot;&lt;!-- hugo: enter themes/blank/partials/nav.html --&gt;&quot; | safeHtml }}
&lt;nav&gt;
	&lt;ul&gt;
		&lt;li&gt;&lt;a class=&quot;current&quot; href=&quot;{{ .Site.BaseUrl }}/&quot; title=&quot;&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/&quot;&gt;Templates&lt;/a&gt;
			&lt;ul class=&quot;subpages&quot;&gt;
				&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/archetype&quot;&gt;Archetypes&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/group&quot;&gt;Groups&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/homepage&quot;&gt;Home Page&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/list&quot;&gt;Lists&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/menu&quot;&gt;Menus&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/partial&quot;&gt;Partials&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/single&quot;&gt;Singles&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/static&quot;&gt;Static&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/syntax&quot;&gt;Syntax&lt;/a&gt;&lt;/li&gt;
			&lt;/ul&gt;
		&lt;/li&gt;
		&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/best&quot;&gt;Best Practices&lt;/a&gt;
		&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/misc&quot;&gt;Miscellaneous&lt;/a&gt;
		&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/privacy&quot;&gt;Privacy&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;&lt;a href=&quot;{{ .Site.BaseUrl }}/about&quot;&gt;About&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
&lt;/nav&gt;
{{ &quot;&lt;!-- hugo: exit themes/blank/partials/nav.html --&gt;&quot; | safeHtml }}
</code></pre>

<p>In my template, I call the partial:</p>

<pre><code>{{ partial &quot;nav.html&quot; . }}
</code></pre>

<p>I keep a browser window open next to my text editor so that I can see the changes every time
I save the file.</p>

<h2 id="toc_3">Front Matter Variables</h2>

<p>When you define a variable in the front matter, Hugo stores it in the <code>.Params</code> map. You just
have to add the name of the variable to reference it:</p>

<pre><code>.Params.menu
</code></pre>

<p>We can use a simple test to determine which menu item to highlight: if the articles &ldquo;menu&rdquo; variable is
the same as the menu item&rsquo;s path, then it should be highlighted.</p>

<pre><code>{{ if eq &quot;archetypes&quot; .Params.menu }}class=&quot;current&quot;{{end}}
</code></pre>

<p>One of the nice features about the <code>.Params</code> map is that it doesn&rsquo;t throw an error if the variable
isn&rsquo;t defined. That means we can use <code>.Params.menu</code> even if the user forgets to define it in their
front matter.</p>

<p>(Note - if you are doing something like this, you should provide a default like <code>menu = &quot;none&quot;</code> in your archetypes.)</p>

<p>Let&rsquo;s update all the lines with that test:</p>

<pre><code>&lt;li&gt;&lt;a {{ if eq &quot;archetypes&quot; .Params.menu }}class=&quot;current&quot;{{end}} href=&quot;{{ .Site.BaseUrl }}/archetype&quot;&gt;Archetypes&lt;/a&gt;&lt;/li&gt;

</code></pre>

<p>That works pretty well. If an article defines a menu, then the corresponding menu item is highlighted.
There are a couple of problems, though. If the article doesn&rsquo;t define a menu, then nothing is highlighted.
Or if it defines one but there&rsquo;s a typo (say &ldquo;archetype&rdquo; or &ldquo;architypes&rdquo;), then nothing is highlighted.</p>

<p>While that second issue is generally an unsolvable problem, I want the easy out for the first - highlight the Home menu.</p>

<h2 id="toc_4">Defaulting a Variable</h2>

<p>This should be an easy thing to do: if the menu isn&rsquo;t defined, provide a default value of &ldquo;home.&rdquo;</p>

<p>My favorite way to do that is with the &ldquo;with&rdquo; template command:</p>

<pre><code>{{ with (or .Params.menu &quot;home&quot;) }}
</code></pre>

<p>That reads &ldquo;In the following block, use .Params.menu if it is defined, otherwise use the value &lsquo;home&rsquo;.&rdquo; It&rsquo;s nifty.</p>

<pre><code>{{ with (or .Params.menu &quot;home&quot;) }}
	&lt;ul class=&quot;menu&quot;&gt;
		&lt;li&gt;&lt;a {{ if eq &quot;home&quot; . }}class=&quot;current&quot;{{ end }} href=&quot;{{ .Site.BaseUrl }}/&quot; title=&quot;&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;
</code></pre>

<p>Saving that, though, causes problems with the generated page because the &ldquo;with&rdquo; command resets &ldquo;.&rdquo; and
that means <code>.Site</code> is no longer valid. The fix is to do the variable-local-shuffle:</p>

<pre><code>{{ $baseUrl := .Site.BaseUrl }}
{{ with (or .Params.menu &quot;home&quot;) }}
	&lt;ul class=&quot;menu&quot;&gt;
		&lt;li&gt;&lt;a {{ if eq &quot;home&quot; . }}class=&quot;current&quot;{{ end }} href=&quot;{{ $baseUrl }}/&quot; title=&quot;&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;
</code></pre>

<h2 id="toc_5">The Final Partial</h2>

<p>My theme&rsquo;s <code>layous/partials/nav.html</code> contains:</p>

<pre><code>
{{ &quot;&lt;!-- hugo: enter themes/blank/partials/nav.html --&gt;&quot; | safeHtml }}
&lt;nav&gt;
{{ $baseUrl := .Site.BaseUrl }}
{{ with (or .Params.menu &quot;home&quot;) }}
	&lt;ul class=&quot;menu&quot;&gt;
		&lt;li&gt;&lt;a {{ if eq &quot;home&quot; . }}class=&quot;current&quot;{{ end }} href=&quot;{{ $baseUrl }}/&quot; title=&quot;&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;&lt;a href=&quot;{{ $baseUrl }}/&quot; title=&quot;&quot;&gt;Templates&lt;/a&gt;
			&lt;ul class=&quot;subpages&quot;&gt;
				&lt;li&gt;&lt;a {{ if eq &quot;archetypes&quot; . }}class=&quot;current&quot;{{end}} href=&quot;{{ $baseUrl }}/archetype&quot;&gt;Archetypes&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a {{ if eq &quot;groups&quot;     . }}class=&quot;current&quot;{{end}} href=&quot;{{ $baseUrl }}/group&quot;&gt;Groups&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a {{ if eq &quot;homepage&quot;   . }}class=&quot;current&quot;{{end}} href=&quot;{{ $baseUrl }}/homepage&quot;&gt;Home Page&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a {{ if eq &quot;lists&quot;      . }}class=&quot;current&quot;{{end}} href=&quot;{{ $baseUrl }}/list&quot;&gt;Lists&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a {{ if eq &quot;menus&quot;      . }}class=&quot;current&quot;{{end}} href=&quot;{{ $baseUrl }}/menu&quot;&gt;Menus&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a {{ if eq &quot;partial&quot;    . }}class=&quot;current&quot;{{end}} href=&quot;{{ $baseUrl }}/partial&quot;&gt;Partials&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a {{ if eq &quot;single&quot;     . }}class=&quot;current&quot;{{end}} href=&quot;{{ $baseUrl }}/single&quot;&gt;Singles&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a {{ if eq &quot;static&quot;     . }}class=&quot;current&quot;{{end}} href=&quot;{{ $baseUrl }}/static&quot;&gt;Static&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a {{ if eq &quot;syntax&quot;     . }}class=&quot;current&quot;{{end}} href=&quot;{{ $baseUrl }}/syntax&quot;&gt;Syntax&lt;/a&gt;&lt;/li&gt;
			&lt;/ul&gt;
		&lt;/li&gt;
		&lt;li&gt;&lt;a {{ if eq &quot;best&quot;    . }}class=&quot;current&quot;{{end}} href=&quot;{{ $baseUrl }}/best&quot;&gt;Best Practices&lt;/a&gt;
		&lt;li&gt;&lt;a {{ if eq &quot;misc&quot;    . }}class=&quot;current&quot;{{end}} href=&quot;{{ $baseUrl }}/misc&quot;&gt;Miscellaneous&lt;/a&gt;
		&lt;li&gt;&lt;a {{ if eq &quot;privacy&quot; . }}class=&quot;current&quot;{{end}} href=&quot;{{ $baseUrl }}/privacy&quot;&gt;Privacy&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;&lt;a {{ if eq &quot;about&quot;   . }}class=&quot;current&quot;{{end}} href=&quot;{{ $baseUrl }}/about&quot;&gt;About&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
{{ end }}
&lt;/nav&gt;
{{ &quot;&lt;!-- hugo: exit themes/blank/partials/nav.html --&gt;&quot; | safeHtml }}
</code></pre>

			</article>
		</div>

		<div class="col c2">
			
		</div>
	</div>

	<div id="footer" class="row">
		<div class="col c12 aligncenter">
			<footer>
				<p>&copy; Michael D Henderson 2014 &middot; Powered by <a href="http://gohugo.io">Hugo</a></p>
			</footer>
		</div>
	</div>
</div>

</body>
</html>